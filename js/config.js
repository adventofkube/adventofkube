// Set the start date for day unlocking.
// Day 1 unlocks on START_DATE, Day 2 on START_DATE + 1 day, etc.
export const START_DATE = new Date('2026-01-05T00:00:00');

// Per-day configuration. flagHash is the SHA-256 hex digest of the correct flag.
export const DAYS = [
  {
    day: 0,
    title: 'Setup',
    description: 'Set up your local environment: install Docker, kind, kubectl, and helm. Then deploy a test chart to verify everything works.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day00.tgz',
  },
  {
    day: 1,
    title: 'Broken Deployment',
    description: 'A Deployment is failing to roll out. There are 3 things wrong with it. Diagnose each issue, fix them, and extract the flag from the running pod.',
    flagHash: '3d9822e477d0414cc8c153847fbb667394143b9301c816e2b9eb0efb8bb737e4',
    chartUrl: 'https://example.com/charts/day01.tgz',
    setup: [
      'Add the Advent of Kube Helm repo:',
      '<code>helm repo add adventofkube https://muhammedhmahmood.github.io/adventofkube/charts</code>',
      'Install the chart:',
      '<code>helm install day01 adventofkube/day01</code>',
      'Start investigating:',
      '<code>kubectl get pods -n day01</code>',
    ],
    hints: [
      'Run <code>kubectl describe pod -n day01</code> and look at the Events section. What does it say about the image?',
      'The image tag in the Deployment doesn\'t exist in the registry. Check what tags are actually available and fix the tag.',
      'After fixing the image, the pod starts but crashes. Run <code>kubectl logs -n day01 &lt;pod-name&gt;</code> to see why.',
      'The app needs an environment variable. There\'s a ConfigMap in the namespace that has the right value â€” wire it into the Deployment.',
      'The pod is running but you can\'t reach the app. Compare the <code>containerPort</code> in the Deployment with the port the app actually listens on.',
    ],
  },
  {
    day: 2,
    title: 'CrashLoop Detective',
    description: 'A pod is stuck in CrashLoopBackOff. Investigate the logs and fix the underlying issue to reveal the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day02.tgz',
  },
  {
    day: 3,
    title: 'Service Wiring',
    description: 'Two services need to communicate but can\'t. Fix the selectors, ports, and DNS to get the flag flowing.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day03.tgz',
  },
  {
    day: 4,
    title: 'Secret Rotation',
    description: 'A deployment references a Secret that has been rotated. The old key no longer works. Update the Secret and restart the pods to get the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day04.tgz',
  },
  {
    day: 5,
    title: 'Resource Quota Squeeze',
    description: 'A namespace has a ResourceQuota and your deployment exceeds it. Right-size the resource requests to fit within the quota and deploy successfully.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day05.tgz',
  },
  {
    day: 6,
    title: 'Multi-Container Debug',
    description: 'A pod with a sidecar and main container has a shared volume misconfiguration. Fix the volume mounts so both containers can communicate and reveal the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day06.tgz',
  },
  {
    day: 7,
    title: 'Ingress Maze',
    description: 'Multiple Ingress rules are conflicting. Fix the routing so traffic reaches the correct backend service to return the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day07.tgz',
  },
  {
    day: 8,
    title: 'Job Failure Analysis',
    description: 'A Job keeps failing after 3 attempts. Diagnose why it fails, fix the issue, and let it run to completion to output the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day08.tgz',
  },
  {
    day: 9,
    title: 'RBAC Lockdown',
    description: 'A ServiceAccount can\'t read the Secret containing the flag. Create the right Role and RoleBinding to grant access.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day09.tgz',
  },
  {
    day: 10,
    title: 'NetworkPolicy Firewall',
    description: 'A pod has the flag but a NetworkPolicy is blocking all traffic to it. Write a policy that allows only your debug pod to reach it.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day10.tgz',
  },
  {
    day: 11,
    title: 'Node Affinity Puzzle',
    description: 'A pod is stuck Pending because of node affinity rules that don\'t match any node. Fix the affinity or label the nodes correctly to schedule the pod.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day11.tgz',
  },
  {
    day: 12,
    title: 'PV Reclaim',
    description: 'A PersistentVolume has the flag on disk but its reclaim policy and claim are misconfigured. Fix the PV/PVC binding to mount the data.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day12.tgz',
  },
  {
    day: 13,
    title: 'ConfigMap Surgery',
    description: 'Multiple deployments share a ConfigMap but one needs different values. Refactor without breaking the others, then roll out to get the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day13.tgz',
  },
  {
    day: 14,
    title: 'Probes Gone Wrong',
    description: 'Liveness and readiness probes are misconfigured, causing a pod to restart endlessly or never receive traffic. Fix the probes to stabilize the deployment and get the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day14.tgz',
  },
  {
    day: 15,
    title: 'Taint Toleration',
    description: 'The only node with available resources is tainted. Add the right tolerations to your pod spec to schedule it and retrieve the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day15.tgz',
  },
  {
    day: 16,
    title: 'HPA Tuning',
    description: 'An HPA is scaling a deployment to max replicas but the pods are crashing under load. Fix the resource configuration and scaling thresholds so the app stabilizes and serves the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day16.tgz',
  },
  {
    day: 17,
    title: 'Namespace Isolation',
    description: 'The flag is in a pod in a locked-down namespace. You have access to a different namespace. Use RBAC and NetworkPolicies to reach across and extract the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day17.tgz',
  },
  {
    day: 18,
    title: 'Webhook Blocker',
    description: 'A ValidatingWebhookConfiguration is rejecting your deployments. Understand the webhook\'s rules and craft a deployment that passes validation to get the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day18.tgz',
  },
  {
    day: 19,
    title: 'Priority Preemption',
    description: 'Critical system pods are consuming all resources. Use PriorityClasses to preempt lower-priority workloads and schedule your pod to get the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day19.tgz',
  },
  {
    day: 20,
    title: 'Init Container Chain',
    description: 'A pod has three init containers that must run in sequence, each producing output for the next. One is broken. Fix the chain to produce the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day20.tgz',
  },
  {
    day: 21,
    title: 'CRD Operator',
    description: 'A custom operator watches a CRD. Create the correct custom resource spec to trigger the operator to generate a Secret containing the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day21.tgz',
  },
  {
    day: 22,
    title: 'Pod Security Standards',
    description: 'A namespace enforces restricted Pod Security Standards. Your deployment violates them. Fix the security context to comply while keeping the app functional and revealing the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day22.tgz',
  },
  {
    day: 23,
    title: 'Ephemeral Debug',
    description: 'A distroless pod has no shell but contains the flag on its filesystem. Use ephemeral debug containers to attach and extract it.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day23.tgz',
  },
  {
    day: 24,
    title: 'Cert Manager',
    description: 'A TLS certificate has expired and the Ingress is refusing HTTPS connections. Fix the Certificate resource and trigger renewal to restore access and get the flag.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day24.tgz',
  },
  {
    day: 25,
    title: 'Grand Finale',
    description: 'A multi-namespace environment is completely broken: RBAC is wrong, NetworkPolicies block everything, pods are misconfigured, and the flag is split across three services. Fix it all.',
    flagHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
    chartUrl: 'https://example.com/charts/day25.tgz',
  },
];
